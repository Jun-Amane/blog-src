(() => {
  // <stdin>
  console.log("This site was generated by Hugo.");
  document.addEventListener("DOMContentLoaded", () => {
    const cdnBase = "https://cdn.zzy040330.moe";
    const isLocalPath = (url) => {
      return !/^https?:\/\//i.test(url) && !/^\/\//.test(url) && !url.includes(cdnBase);
    };
    const toAbsolutePath = (src) => new URL(src, location.href).pathname;
    const handleEl = (el, attr) => {
      const originalSrc = el.getAttribute(attr);
      if (!originalSrc || !isLocalPath(originalSrc)) return;
      const absPath = toAbsolutePath(originalSrc);
      const cdnUrl = cdnBase + absPath;
      const tester = new Image();
      tester.onload = () => el.setAttribute(attr, cdnUrl);
      tester.src = cdnUrl;
    };
    document.querySelectorAll("img").forEach((img) => handleEl(img, "src"));
    document.querySelectorAll("img[data-src]").forEach((img) => handleEl(img, "data-src"));
  });
})();
